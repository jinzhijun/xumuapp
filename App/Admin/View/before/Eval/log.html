<include file="common:header" />
<body>
<link rel="stylesheet" type="text/css" href="__PUBLIC__/DataTables-1.10.8/media/css/jquery.dataTables.css">
<link rel="stylesheet" type="text/css" href="__PUBLIC__/DataTables-1.10.8/media/css/dataTables.bootstrap.css">
<!-- jQuery -->
<script type="text/javascript" charset="utf8" src="__PUBLIC__/DataTables-1.10.8/media/js/jquery.js"></script>

<!-- DataTables -->
<script type="text/javascript" charset="utf8" src="__PUBLIC__/DataTables-1.10.8/media/js/jquery.dataTables.js"></script>
       
 <style>
.main-content {
  margin-left: 0;
    margin-right: 0;
    margin-top: 0;
    min-height: 100%;
    padding: 0;
}table.dataTable thead .sorting, table.dataTable thead .sorting_asc, table.dataTable thead .sorting_desc, table.dataTable thead .sorting_asc_disabled, table.dataTable thead .sorting_desc_disabled {
    cursor: pointer;
    position: inherit;
}table.dataTable thead .sorting_asc:after{
      content: none;
}table.dataTable thead .sorting:after {
     content: none;
}table.dataTable thead .sorting_desc:after {
    content: none;
}
</style>
<div class="main-container" id="main-container">
  <div class="main-container-inner"> <a class="menu-toggler" id="menu-toggler" href="#"> <span
				class="menu-text"></span> </a>  
    <div class="main-content">
      <div class="page-content">
        <div class="row">
          <div class="col-xs-12">
            <div class="widget-box transparent" id="recent-box">
              <div class="widget-header">
                <div class="widget-toolbar no-border">
                  <ul class="nav nav-tabs" id="recent-tab">
                    <li class="active"><a style="content:'111';"
												href="{:U('eval/log')}">用户访问列表</a></li>
                    
                  </ul>
                </div>
              </div>
            </div>
            <br>
            <div class="main-container" id="main-container"> 
              <script type="text/javascript">
				try{ace.settings.check('main-container' , 'fixed')}catch(e){}
			</script>
               
              
              <div class="main-container-inner"> <a class="menu-toggler" id="menu-toggler" href="#"> <span
										class="menu-text"></span> </a>
               
                <div class="row">
                  <div class="col-xs-12"> 
                    <!-- PAGE CONTENT BEGINS -->
                     
                    <!-- <div class="table-responsive">
                      <table id="sample-table-1"
						 class="table table-striped table-bordered table-hover">
                        <thead>
                          <tr>
                           
                            <td>编号</td>
                            <td>登录账号</td>
                            <td>登录姓名</td>
                            <td>登录时间</td>
                            <td>登录ip</td>
                            <td>登录状态</td>
                           
                          </tr>
                        </thead>
                        <tbody>
                          <volist name="list" id="vo">
                            <tr>
                              <input type="hidden" name="id" id="id" value="{$vo.id}" />
                               
                              <td><span style="color:#999;">{$vo.id}</span></td>
                              <td>{$vo.account}</td>
                               <td>{$vo.real_name}</td>
                              <td class="hidden-480"><span class="label label-sm label-warning">
                              {$vo.login_time|date="Y-m-d H:i:s",###}
                              </span></td>
                              <td>{$vo.login_ip}</td>
                              <td> 
								<switch name="vo.is_login">   
								 <case value="0"> <font style="color:#f00;">用户主动退出</font></case> 
								 <case value="1" >用户登录</case> 
								   <case value="2"><font style="color:blue;">系统超时</font></case> 
								      <default />系统超时
								      </switch>					
                                  <if condition="$vo.is_login eq 1 ">
                                  登录
                                    <else /><font style="color:#f00;">登出</font>
                                  </if>
                                   </td>
                             
                               
                            </tr>
                          </volist>
                        </tbody>
                      </table>
                      
                      <p style="text-align: center; color: #ccc;">{$not_found}</p>
                      <ul style="line-height: 30px;" class="fy_li">
                        {$page}
                      </ul>
                    </div> -->
                     
                   <div class="col-xs-12">
									
										

										<div class="table-responsive">
										 <table id="table_id" class="display">
												<thead>
													<tr>
													
														<th class="center">
															<label>
																<input type="checkbox" class="ace" />
																<span class="lbl"></span>
															</label>
														</th>
														<th>编号</th>
														<th>访问账号</th>
														<th class="hidden-480">访问url</th>

														<th>
															<i class="icon-time bigger-110 hidden-480"></i>
															访问时间
														</th>
														<th class="hidden-480">访问ip</th>

														<th>访问信息</th>
													</tr>
												</thead>

												<tbody>
												 <volist name="list" id="vo">
													<tr>
														<td class="center">
															<label>
																<input type="checkbox" class="ace" />
																<span class="lbl"></span>
															</label>
														</td>

														<td>
															<a href="#">{$vo.id}</a>
														</td>
														<td>{$vo.account}</td>
														 
                             
														<td class="hidden-480">{$vo.module}</td>
														 <td class="hidden-480"> 
                              {$vo.login_time|date="Y-m-d H:i:s",###}
                              </td>
                              <td>{$vo.login_ip}</td>

														<td> {$vo.status}
								<!-- <switch name="vo.is_login">   
								 <case value="0"> <font style="color:#f00;">用户主动退出</font></case> 
								 <case value="1" >用户登录</case> 
								   <case value="2"><font style="color:blue;">系统超时</font></case> 
								      <default />系统超时
								      </switch>	 -->				
                                  <!-- <if condition="$vo.is_login eq 1 ">
                                  登录
                                    <else /><font style="color:#f00;">登出</font>
                                  </if> -->
                                   </td>
													</tr>
</volist>
													 

													  

													    
												</tbody>
											</table>
										</div>
									</div><script type="text/javascript">
									$(document).ready( function () {
										//$(".pagination > .prev > a").text('22');
						                $('#table_id').DataTable({
						                	
						                	language: {
						                        "sProcessing": "处理中...",
						                        "sLengthMenu": " 每页显示_MENU_ 条",
						                        "sZeroRecords": "没有匹配结果",
						                        "sInfo": " _START_ - _END_ 条&nbsp;&nbsp;&nbsp;合计_TOTAL_ 条",
						                        "sInfoEmpty": "显示第 0 至 0 项结果，共 0 项",
						                        "sInfoFiltered": "(由 _MAX_ 项结果过滤)",
						                        "sInfoPostFix": "",
						                        "sSearch": "搜索:",
						                        "sUrl": "",
						                        "sEmptyTable": "表中数据为空",
						                        "sLoadingRecords": "载入中...",
						                        "sInfoThousands": ",",
						                        
						                        "oAria": {
						                            "sSortAscending": ": 以升序排列此列",
						                            "sSortDescending": ": 以降序排列此列"
						                        }}   
						                  
						                });
				
				
				$('table th input:checkbox').on('click' , function(){
					var that = this;
					$(this).closest('table').find('tr > td:first-child input:checkbox')
					.each(function(){
						this.checked = that.checked;
						$(this).closest('tr').toggleClass('selected');
					});
						
				});
			
			
				$('[data-rel="tooltip"]').tooltip({placement: tooltip_placement});
				function tooltip_placement(context, source) {
					var $source = $(source);
					var $parent = $source.closest('table')
					var off1 = $parent.offset();
					var w1 = $parent.width();
			
					var off2 = $source.offset();
					var w2 = $source.width();
			
					if( parseInt(off2.left) < parseInt(off1.left) + parseInt(w1 / 2) ) return 'right';
					return 'left';
				}
			})
		</script>
                    <!-- /.table-responsive --> 
                    
                    <script type="text/javascript">
                    $('.search').click(function () { 
                    	var name = $('#name').val();
                    	if(name == ""){
                    		alert('请输入您要搜索的数据！');
                    		$('#name').focus();
                    		return false;
                    	}
                     });
                    $(".chkall").click(function () { 
                    	var checked = $(this).prop("checked");
                    	$('.box').prop("checked",checked);
                    });
                    $(".all_val").click(function () { 
                    	var list = new Array();
                    	$("input[id='style_val']:checked").each(
								function() {
									list.push($(this).val());
								 }); 
                    	if(list == ''){
                    		alert('请选择您要删除的数据！');
                    		return false;
                    	}
                    	var data = "list="+list.join(',');
                    	
                    	 $.ajax({
            			     url:"{:u(CONTROLLER_NAME . '/previous_delete')}",
            			     type:"POST",
            			     dataType:"json",
            			     data:data,
            			     success:function(res){
            			    if(res.result == 'success1'){
            			          alert("操作成功");
            			            location.reload() 
            			         // location.href="{:u('/home/index/cc')}"
            			         }else{
            			        alert("操作失败");
            			      }
            			     
            			     }
            			   });
                    	 
                    });
                    function selectall(name) {
                    	  if ($("#check_box").attr("checked")=='checked') {
                    	    $("input[name='"+name+"']").each(function() {
                    	        $(this).attr("checked","checked");
                    	      
                    	    });
                    	  } else {
                    	    $("input[name='"+name+"']").each(function() {
                    	        $(this).removeAttr("checked");
                    	    });
                    	  }
                    	} 
	   
	  $('.del').click(function(){
		  var id = $(this).attr('data-id');
		  $('.del_id').attr('data-cid',id);
	  });
	  $('.del_id').click(function(){
		  var id = $(this).attr('data-cid');
		  $.ajax({
			     url:"{:u(CONTROLLER_NAME . '/previous_delete')}",
			     type:"POST",
			     dataType:"json",
			     data:$(".form-horizontal").serialize()+"&id="+id,
			     success:function(res){
			    if(res.result == 'success'){
			          //alert("操作成功");
			          location.reload() 
			         // location.href="{:u('/home/index/cc')}"
			         }else{
			        alert("操作失败");
			      }
			     
			     }
			    });
		 // $('.del_id').attr('data-cid',id);
	  });
	  
	  function show_change(id){
		 
		 var show = document.getElementById("show_"+id).checked == true ? '1':'0';
			 
		  $.ajax({
		    url:"{:U(CONTROLLER_NAME . '/show_change')}", // 表单提交的地址
		    type: 'POST',
		    dataType: 'json',
		    data:'id='+id+'&status='+show, // 表单提交的数据
		    success:function(res){
			 }
		  });
		}
			 
				
				
				$('table th input:checkbox').on('click' , function(){
					var that = this;
					$(this).closest('table').find('tr > td:first-child input:checkbox')
					.each(function(){
						this.checked = that.checked;
						$(this).closest('tr').toggleClass('selected');
					});
						
				});
			
			
				 
		</script> 
                    
                    <!-- PAGE CONTENT ENDS --> 
                  </div>
                  <!-- /.col --> 
                </div>
                <!-- /.row --> 
                
              </div>
              <!-- /.main-container-inner --> 
              
            </div>
            <!-- /.main-container --> 
          </div>
        </div>
        <!-- /.row --> 
      </div>
      <!-- /.page-content --> 
    </div>
    <!-- /.main-content --> 
    
  </div>
  <!-- /.main-container-inner --> 
  
  <a href="#" id="btn-scroll-up"
			class="btn-scroll-up btn btn-sm btn-inverse"> <i
			class="icon-double-angle-up icon-only bigger-110"></i> </a> </div>
<include file="common:footer" />
